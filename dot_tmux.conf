# Prefix
set -g prefix C-a
unbind C-b
bind C-a send-prefix

set -g mouse on
set -g history-limit 100000

# Splits
bind | split-window -h
bind - split-window -v

# Vim-style pane navigation
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Pane resizing (Shift + H/J/K/L)
bind -r H resize-pane -L 5
bind -r J resize-pane -D 2
bind -r K resize-pane -U 2
bind -r L resize-pane -R 5

# Zoom
bind z resize-pane -Z

# Close pane with confirmation
bind x confirm-before -p "kill-pane? (y/n)" kill-pane

# Switch between last two panes
bind Tab last-pane

# Simple statusline
set -g status-bg black
set -g status-fg white
set -g status-left "#S "
set -g status-right "#(cd #{pane_current_path} && git rev-parse --is-inside-work-tree >/dev/null 2>&1 && echo \" #{pane_current_path} $(git branch --show-current 2>/dev/null)$(git diff --quiet 2>/dev/null || echo '*') |\") #H | %Y-%m-%d %H:%M"

# Session/window tree
bind-key s choose-tree -Zw

# Choose session interactively
bind S choose-session

# Toggle between last two sessions
bind B switch-client -l

# Window/pane numbering
set -g base-index 1
set -g pane-base-index 1
set -g renumber-windows on

# Vi-style keys in copy mode
set -g mode-keys vi

# Reload config from inside tmux
bind r source-file "~/.tmux.conf"
